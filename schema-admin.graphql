scalar Upload

"""
The outcome of the curators reviewing a prospective story.
"""
enum CuratedStatus {
    """
    Recommend this story for Pocket users. This is first-tier content.
    """
    RECOMMENDATION
    """
    This story is suitable for our curated corpus. It's a second-tier recommendation.
    """
    CORPUS
}

"""
Options for returning items sorted by the supplied field.
"""
enum OrderBy {
    """
    Return items in ascending order.
    """
    ASC
    """
    Return items in descending order.
    """
    DESC
}

"""
The list of Pocket topics. This enum is not used anywhere in this schema, however it is used
by the Curation Admin Tools frontend to edit curated items.
"""
enum Topics {
    BUSINESS
    CAREER
    CORONAVIRUS
    EDUCATION
    ENTERTAINMENT
    FOOD
    GAMING
    HEALTH_FITNESS
    PARENTING
    PERSONAL_FINANCE
    POLITICS
    SCIENCE
    SELF_IMPROVEMENT
    SPORTS
    TECHNOLOGY
    TRAVEL
}

"""
Possible reasons for rejecting a prospect. This enum is not used anywhere in this schema,
however it is used by the Curation Admin Tools frontend to specify rejection reasons.
"""
enum RejectionReason {
    PAYWALL
    POLITICAL_OPINION
    OFFENSIVE_MATERIAL
    TIME_SENSITIVE
    MISINFORMATION
    OTHER
}

"""
Prospect types. This enum is not used anywhere in this schema, however it is used
by the Curation Admin Tools frontend to filter prospects.
"""
enum ProspectType {
    GLOBAL
    ORGANIC_TIMESPENT
    SYNDICATED
    TOP_SAVED
    DOMAIN_ALLOWLIST
}

"""
The source of the corpus item
"""
enum CorpusItemSource {
    """
    Originated as a prospect in the curation admin tool
    """
    PROSPECT
    """
    Manually entered through the curation admin tool
    """
    MANUAL
    """
    Imported from the legacy database
    """
    BACKFILL
}

"""
A Scheduled Surface, including its associated Prospect Types.
"""
type ScheduledSurface {
    """
    The GUID of the Scheduled Surface. Example: 'NEW_TAB_EN_US'.
    """
    guid: String!
    """
    The display name of the Scheduled Surface. Example 'New Tab (en-US)'.
    """
    name: String!
    """
    The UTC offset of the Scheduled Surface's scheduling day, represented in HMM numeric format.
    """
    utcOffset: Int!
    """
    An array of associated ProspectTypes.
    """
    prospectTypes: [ProspectType!]!
}

"""
A prospective story that has been reviewed by the curators and saved to the curated corpus.
"""
type ApprovedCuratedCorpusItem {
    """
    An alternative primary key in UUID format that is generated on creation.
    """
    externalId: ID!
    """
    The GUID of the corresponding Prospect ID. Will be empty if the item was manually added.
    """
    prospectId: ID
    """
    The URL of the story.
    """
    url: Url!
    """
    The title of the story.
    """
    title: String!
    """
    The excerpt of the story.
    """
    excerpt: String!
    """
    The outcome of the curators' review.
    """
    status: CuratedStatus!
    """
    What language this story is in. This is a two-letter code, for example, 'EN' for English.
    """
    language: CorpusLanguage!
    """
    The name of the online publication that published this story.
    """
    publisher: String!
    """
    The image URL associated with the story.
    This is a link to an S3 bucket - the image will have been pre-uploaded to S3 before saving a curated item.
    """
    imageUrl: Url!
    """
    A topic this story best fits in.
    Temporarily a string value that will be provided by Prospect API, possibly an enum in the future.
    """
    topic: String!
    """
    The source of the corpus item.
    """
    source: CorpusItemSource!
    """
    Whether this story is a Pocket Collection.
    """
    isCollection: Boolean!
    """
    A flag to ML to not recommend this item long term after it is added to the corpus.
    Example: a story covering an election, or "The best of 202x" collection.
    """
    isTimeSensitive: Boolean!
    """
    Whether this item is a syndicated article.
    """
    isSyndicated: Boolean!
    """
    A Unix timestamp of when the entity was created.
    """
    createdAt: Int!
    """
    A single sign-on user identifier of the user who created this entity.
    """
    createdBy: String!
    """
    A Unix timestamp of when the entity was last updated.
    """
    updatedAt: Int!
    """
    A single sign-on user identifier of the user who last updated this entity. Null on creation.
    """
    updatedBy: String
}

"""
A prospective story that has been rejected by the curators.
"""
type RejectedCuratedCorpusItem {
    """
    An alternative primary key in UUID format that is generated on creation.
    """
    externalId: ID!
    """
    The GUID of the corresponding Prospect ID. Will be empty if the item was manually added.
    """
    prospectId: ID
    """
    The URL of the story.
    """
    url: Url!
    """
    The title of the story.
    """
    title: String!
    """
    A topic this story best fits in.
    Temporarily a string value that will be provided by Prospect API, possibly an enum in the future.
    """
    topic: String!
    """
    What language this story is in. This is a two-letter code, for example, 'EN' for English.
    """
    language: CorpusLanguage!
    """
    The name of the online publication that published this story.
    """
    publisher: String!
    """
    Reason why it was rejected. Can be multiple reasons. Will likely be stored either as comma-separated values or JSON.
    """
    reason: String!
    """
    A Unix timestamp of when the entity was created.
    """
    createdAt: Int!
    """
    A single sign-on user identifier of the user who created this entity.
    """
    createdBy: String!
}

"""
An edge in a connection.
"""
type ApprovedCuratedCorpusItemEdge {
    """
    A cursor for use in pagination.
    """
    cursor: String!
    """
    The Approved Item at the end of the edge.
    """
    node: ApprovedCuratedCorpusItem!
}

type ApprovedCuratedCorpusImageUrl {
    """
    The url of the image stored in the s3 bucket
    """
    url: String!
}

"""
An edge in a connection for RejectedCuratedCorpusItem type.
"""
type RejectedCuratedCorpusItemEdge {
    """
    A cursor for use in pagination.
    """
    cursor: String!
    """
    The Rejected Curated Item at the end of the edge.
    """
    node: RejectedCuratedCorpusItem!
}

"""
The connection type for Approved Item.
"""
type ApprovedCuratedCorpusItemConnection {
    """
    A list of edges.
    """
    edges: [ApprovedCuratedCorpusItemEdge!]!
    """
    Information to aid in pagination.
    """
    pageInfo: PageInfo!
    """
    Identifies the total count of Approved Items in the connection.
    """
    totalCount: Int!
}

"""
The connection type for Rejected Curated Item.
"""
type RejectedCuratedCorpusItemConnection {
    """
    A list of edges.
    """
    edges: [RejectedCuratedCorpusItemEdge!]!
    """
    Information to aid in pagination.
    """
    pageInfo: PageInfo!
    """
    Identifies the total count of Rejected Curated Items in the connection.
    """
    totalCount: Int!
}

"""
A scheduled entry for an Approved Item to appear on a Scheduled Surface.
For example, a story that is scheduled to appear on December 31st, 2021 on the New Tab in Firefox for the US audience.
"""
type ScheduledCuratedCorpusItem {
    """
    An alternative primary key in UUID format that is generated on creation.
    """
    externalId: ID!
    """
    A Unix timestamp of when the entity was created.
    """
    createdAt: Int!
    """
    A single sign-on user identifier of the user who created this entity.
    """
    createdBy: String!
    """
    A Unix timestamp of when the entity was last updated.
    """
    updatedAt: Int!
    """
    A single sign-on user identifier of the user who last updated this entity. Null on creation.
    """
    updatedBy: String
    """
    The date the associated Approved Item is scheduled to appear on a Scheduled Surface.
    This date is relative to the time zone of the Scheduled Surface. Format: YYYY-MM-DD.
    """
    scheduledDate: Date!
    """
    The associated Approved Item.
    """
    approvedItem: ApprovedCuratedCorpusItem!
    """
    The GUID of this schedudedSurface to which this item is scheduled. Example: 'NEW_TAB_EN_US'.
    """
    scheduledSurfaceGuid: ID!
}

"""
The shape of the result returned by the getScheduledCuratedCorpusItems query.
"""
type ScheduledCuratedCorpusItemsResult {
    """
    The date items are scheduled for, in YYYY-MM-DD format.
    """
    scheduledDate: Date!
    """
    The number of curated items that are collections for the scheduled date.
    """
    collectionCount: Int!
    """
    The number of syndicated articles for the scheduled date.
    """
    syndicatedCount: Int!
    """
    The total number of items for the scheduled date.
    """
    totalCount: Int!
    """
    An array of items for a given Scheduled Surface
    """
    items: [ScheduledCuratedCorpusItem!]!
}

"""
Available fields for filtering ApprovedCuratedCorpusItems.
"""
input ApprovedCuratedCorpusItemFilter {
    """
    Optional filter on the URL field. Returns partial matches.
    """
    url: Url
    """
    Optional filter on the title field. Returns partial matches.
    """
    title: String
    """
    Optional filter on the topic field.
    """
    topic: String
    """
    Optional filter on the status of Approved Items.
    """
    status: CuratedStatus
    """
    Optional filter on the language Approved Items have been classified as.
    This is a two-letter string, e.g. 'EN' for English or 'DE' for 'German'.
    """
    language: CorpusLanguage
}

"""
Available fields for filtering RejectedCuratedCorpusItems.
"""
input RejectedCuratedCorpusItemFilter {
    """
    Optional filter on the URL field. Returns partial matches.
    """
    url: Url
    """
    Optional filter on the title field. Returns partial matches.
    """
    title: String
    """
    Optional filter on the topic field.
    """
    topic: String
    """
    Optional filter on the language Rejected Curated Items have been classified as.
    This is a two-letter string, e.g. 'EN' for English or 'DE' for 'German'.
    """
    language: CorpusLanguage
}

"""
Available fields for filtering scheduled items for a given Scheduled Surface.
"""
input ScheduledCuratedCorpusItemsFilterInput {
    """
    The GUID of the Scheduled Surface. Example: 'NEW_TAB_EN_US'.
    """
    scheduledSurfaceGuid: ID!
    """
    Which day to show scheduled items from. Expects a date in YYYY-MM-DD format.
    """
    startDate: Date!
    """
    To what day to show scheduled items to, inclusive. Expects a date in YYYY-MM-DD format.
    """
    endDate: Date!
}

"""
Input data for creating an Approved Item and optionally scheduling this item to appear on a Scheduled Surface.
"""
input CreateApprovedCuratedCorpusItemInput {
    """
    The GUID of the corresponding Prospect ID. Will be empty for manually added items.
    """
    prospectId: ID
    """
    The URL of the Approved Item.
    """
    url: Url!
    """
    The title of the Approved Item.
    """
    title: String!
    """
    The excerpt of the Approved Item.
    """
    excerpt: String!
    """
    The outcome of the curators' review of the Approved Item.
    """
    status: CuratedStatus!
    """
    What language this item is in. This is a two-letter code, for example, 'EN' for English.
    """
    language: CorpusLanguage!
    """
    The name of the online publication that published this story.
    """
    publisher: String!
    """
    The image URL for this item's accompanying picture.
    """
    imageUrl: Url!
    """
    A topic this story best fits in.
    Temporarily a string value that will be provided by Prospect API, possibly an enum in the future.
    """
    topic: String!
    """
    The source of the corpus item.
    """
    source: CorpusItemSource!
    """
    Whether this story is a Pocket Collection.
    """
    isCollection: Boolean!
    """
    A flag to ML to not recommend this item long term after it is added to the corpus.
    Example: a story covering an election, or "The best of 202x" collection.
    """
    isTimeSensitive: Boolean!
    """
    Whether this item is a syndicated article.
    """
    isSyndicated: Boolean!
    """
    Optionally, specify the date this item should be appearing on a Scheduled Surface. Format: YYYY-MM-DD
    """
    scheduledDate: Date
    """
    Optionally, specify the GUID of the Scheduled Surface this item should be scheduled for.
    """
    scheduledSurfaceGuid: ID
}

"""
Input data for loading an Approved Item via an automated process and optionally scheduling
this item to appear on a Scheduled Surface.
"""
input ImportApprovedCuratedCorpusItemInput {
    """
    The URL of the Approved Item.
    """
    url: Url!
    """
    The title of the Approved Item.
    """
    title: String!
    """
    The excerpt of the Approved Item.
    """
    excerpt: String!
    """
    The outcome of the curators' review of the Approved Item.
    """
    status: CuratedStatus!
    """
    What language this item is in. This is a two-letter capitalized code, for example, 'EN' for English.
    """
    language: CorpusLanguage!
    """
    The name of the online publication that published this story.
    """
    publisher: String!
    """
    The image URL for this item's accompanying picture.
    """
    imageUrl: Url!
    """
    A topic this story best fits in. The value will be `null` for migrated items that don't have a topic set.
    """
    topic: String
    """
    The source of the corpus item.
    """
    source: CorpusItemSource!
    """
    Whether this story is a Pocket Collection.
    """
    isCollection: Boolean
    """
    Whether this item is a syndicated article.
    """
    isSyndicated: Boolean
    """
    A Unix timestamp of when the entity was created.
    """
    createdAt: Int!
    """
    A single sign-on user identifier of the user who created this entity.
    """
    createdBy: String!
    """
    A Unix timestamp of when the entity was last updated.
    """
    updatedAt: Int!
    """
    A single sign-on user identifier of the user who last updated this entity.
    """
    updatedBy: String!
    """
    The date this item should be appearing on a Scheduled Surface. Format: YYYY-MM-DD
    """
    scheduledDate: Date!
    """
    The GUID of the Scheduled Surface this item should be scheduled for.
    """
    scheduledSurfaceGuid: ID!
}

"""
The data that the loadApprovedCuratedCorpusItem mutation returns on success.
"""
type ImportApprovedCuratedCorpusItemPayload {
    """
    The approved item, as created by an automated process.
    """
    approvedItem: ApprovedCuratedCorpusItem!
    """
    The scheduled entry that is created by an automated process at the same time.
    """
    scheduledItem: ScheduledCuratedCorpusItem!
}

"""
Input data for updating an Approved Item.
"""
input UpdateApprovedCuratedCorpusItemInput {
    """
    Approved Item ID.
    """
    externalId: ID!
    """
    The title of the Approved Item.
    """
    title: String!
    """
    The excerpt of the Approved Item.
    """
    excerpt: String!
    """
    The outcome of the curators' review of the Approved Item.
    """
    status: CuratedStatus!
    """
    What language this item is in. This is a two-letter code, for example, 'EN' for English.
    """
    language: CorpusLanguage!
    """
    The name of the online publication that published this story.
    """
    publisher: String!
    """
    The image URL for this item's accompanying picture.
    """
    imageUrl: Url!
    """
    A topic this story best fits in.
    Temporarily a string value that will be provided by Prospect API, possibly an enum in the future.
    """
    topic: String!
    """
    A flag to ML to not recommend this item long term after it is added to the corpus.
    Example: a story covering an election, or "The best of 202x" collection.
    """
    isTimeSensitive: Boolean!
}

"""
Input data for rejecting an Approved Item.
"""
input RejectApprovedCuratedCorpusItemInput {
    """
    Approved Item ID.
    """
    externalId: ID!
    """
    A comma-separated list of rejection reasons.
    """
    reason: String!
}

"""
Input data for creating a Rejected Item.
"""
input CreateRejectedCuratedCorpusItemInput {
    """
    The GUID of the corresponding Prospect ID. Will be empty for manually added item.
    """
    prospectId: ID
    """
    The URL of the Rejected Item.
    """
    url: Url!
    """
    The title of the Rejected Item.
    """
    title: String
    """
    A topic this story best fits in.
    Temporarily a string value that will be provided by Prospect API, possibly an enum in the future.
    """
    topic: String!
    """
    What language this item is in. This is a two-letter code, for example, 'EN' for English.
    """
    language: CorpusLanguage
    """
    The name of the online publication that published this story.
    """
    publisher: String
    """
    A comma-separated list of rejection reasons.
    """
    reason: String!
}

"""
Input data for creating a scheduled entry for an Approved Item on a Scheduled Surface.
"""
input CreateScheduledCuratedCorpusItemInput {
    """
    The ID of the Approved Item that needs to be scheduled.
    """
    approvedItemExternalId: ID!
    """
    The GUID of the Scheduled Surface the Approved Item is going to appear on. Example: 'NEW_TAB_EN_US'.
    """
    scheduledSurfaceGuid: ID!
    """
    The date the associated Approved Item is scheduled to appear on a Scheduled Surface. Format: YYYY-MM-DD.
    """
    scheduledDate: Date!
}

"""
Input data for rescheduling a scheduled item for a Scheduled Surface.
"""
input RescheduleScheduledCuratedCorpusItemInput {
    """
    ID of the scheduled item. A string in UUID format.
    """
    externalId: ID!
    """
    The new scheduled date for the scheduled item to appear on a Scheduled Surface. Format: YYYY-MM-DD.
    """
    scheduledDate: Date!
}

"""
Input data for deleting a scheduled item for a Scheduled Surface.
"""
input DeleteScheduledCuratedCorpusItemInput {
    """
    ID of the scheduled item. A string in UUID format.
    """
    externalId: ID!
}

type Query {
    """
    Retrieves a paginated, filterable list of ApprovedCuratedCorpusItems.
    """
    getApprovedCuratedCorpusItems(
        filters: ApprovedCuratedCorpusItemFilter
        pagination: PaginationInput
    ): ApprovedCuratedCorpusItemConnection!

    """
    Retrieves a paginated, filterable list of RejectedCuratedCorpusItems.
    """
    getRejectedCuratedCorpusItems(
        filters: RejectedCuratedCorpusItemFilter
        pagination: PaginationInput
    ): RejectedCuratedCorpusItemConnection!

    """
    Retrieves a list of Approved Items that are scheduled to appear on a Scheduled Surface.
    """
    getScheduledCuratedCorpusItems(
        """
        Required arguments to narrow down scheduled items to a specific Scheduled Surface
        between the supplied start and end dates.
        """
        filters: ScheduledCuratedCorpusItemsFilterInput!
    ): [ScheduledCuratedCorpusItemsResult!]!

    """
    Retrieves an approved curated item with the given URL.
    """
    getApprovedCuratedCorpusItemByUrl(
        """
        The URL of the approved item.
        """
        url: String!
    ): ApprovedCuratedCorpusItem

    """
    Retrieves all ScheduledSurfaces available to the given SSO user. Requires an Authorization header.
    """
    getScheduledSurfacesForUser: [ScheduledSurface!]!
}

type Mutation {
    """
    Creates an Approved Item and optionally schedules it to appear on a Scheduled Surface.
    """
    createApprovedCuratedCorpusItem(
        data: CreateApprovedCuratedCorpusItemInput!
    ): ApprovedCuratedCorpusItem!

    """
    Lets an automated process create an Approved Item and optionally schedule it to appear
    on a Scheduled Surface.
    """
    importApprovedCuratedCorpusItem(
        data: ImportApprovedCuratedCorpusItemInput!
    ): ImportApprovedCuratedCorpusItemPayload!

    """
    Creates a Rejected Item.
    """
    createRejectedCuratedCorpusItem(
        data: CreateRejectedCuratedCorpusItemInput!
    ): RejectedCuratedCorpusItem!

    """
    Updates an Approved Item.
    """
    updateApprovedCuratedCorpusItem(
        data: UpdateApprovedCuratedCorpusItemInput!
    ): ApprovedCuratedCorpusItem!

    """
    Rejects an Approved Item: deletes it from the corpus and creates a Rejected Item instead.
    """
    rejectApprovedCuratedCorpusItem(
        data: RejectApprovedCuratedCorpusItemInput!
    ): ApprovedCuratedCorpusItem!

    """
    Creates a Scheduled Surface Scheduled Item.
    """
    createScheduledCuratedCorpusItem(
        data: CreateScheduledCuratedCorpusItemInput!
    ): ScheduledCuratedCorpusItem!

    """
    Deletes an item from a Scheduled Surface.
    """
    deleteScheduledCuratedCorpusItem(
        data: DeleteScheduledCuratedCorpusItemInput!
    ): ScheduledCuratedCorpusItem!

    """
    Updates the scheduled date of a Scheduled Surface Scheduled Item.
    """
    rescheduleScheduledCuratedCorpusItem(
        data: RescheduleScheduledCuratedCorpusItemInput!
    ): ScheduledCuratedCorpusItem!

    """
    Uploads an image to S3 for an Approved Curated Corpus Item
    """
    uploadApprovedCuratedCorpusItemImage(
        data: Upload!
    ): ApprovedCuratedCorpusImageUrl!
}
